#include "oob_utils.h"

io_connect_t oob_iokit_get_connection(const char *name,u32 type)
{
    kern_return_t kr = KERN_SUCCESS;
    io_connect_t conn = MACH_PORT_NULL;
    io_service_t service  = IOServiceGetMatchingService(kIOMasterPortDefault,
                                IOServiceMatching(name));
    if (service == IO_OBJECT_NULL) {
        printf("unable to find service %s \n",name);
        exit(0);
    }

    kr = IOServiceOpen(service, self, type, &conn);
    CHECK_MACH_ERR(kr,"IOServiceOpen");
    return conn;
}
CFNumberRef oob_uintcf(uint value)
{
    return CFNumberCreate(NULL, kCFNumberSInt32Type, &value);
}
